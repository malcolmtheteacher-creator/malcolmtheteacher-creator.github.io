<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Lesson 27: Books, Articles & Deep Learning</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: #0f0f1e;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(212,175,55,0.3);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #d4af37 0%, #aa8c2c 100%);
            color: #1a1a2e;
            padding: 30px;
            text-align: center;
        }
        .header h1 { font-size: 1.8em; margin-bottom: 10px; }
        .level-badge {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
        }
        .tabs {
            display: flex;
            background: #16213e;
            overflow-x: auto;
            border-bottom: 2px solid #d4af37;
        }
        .tab {
            flex: 1;
            padding: 15px 10px;
            text-align: center;
            cursor: pointer;
            border: none;
            background: none;
            font-size: 0.85em;
            font-weight: 600;
            color: #aaa;
            transition: all 0.3s;
            white-space: nowrap;
            min-width: 120px;
        }
        .tab:hover { background: #1a2744; }
        .tab.active {
            background: #d4af37;
            color: #1a1a2e;
            border-bottom: 3px solid #d4af37;
        }
        .content { padding: 30px; display: none; color: #e0e0e0; }
        .content.active { display: block; }
        .content h2 { color: #d4af37; margin-bottom: 20px; }
        .card {
            background: #1a2744;
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
            border-left: 4px solid #d4af37;
        }
        .card h3 { color: #d4af37; margin-bottom: 10px; }
        .card p { line-height: 1.6; margin: 10px 0; }
        .button {
            background: #d4af37;
            color: #1a1a2e;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            margin: 10px 5px 10px 0;
            transition: all 0.3s;
            font-size: 0.95em;
        }
        .button:hover {
            background: #aa8c2c;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(212,175,55,0.4);
        }
        .interactive-section {
            background: #1a2744;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            border: 2px solid #d4af37;
        }
        .interactive-section h3 { color: #d4af37; margin-bottom: 15px; }
        .mindmap-node {
            background: #0f0f1e;
            border: 2px solid #d4af37;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s;
        }
        .mindmap-node:hover {
            background: #1a2744;
            border-color: #aa8c2c;
            transform: scale(1.02);
        }
        .mindmap-node input {
            width: 100%;
            background: transparent;
            border: 1px solid #d4af37;
            border-radius: 5px;
            padding: 8px;
            color: #e0e0e0;
            margin: 5px 0;
        }
        .palace-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        .palace-item {
            background: #0f0f1e;
            border: 2px solid #d4af37;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }
        .palace-item h3 { color: #d4af37; margin-bottom: 10px; }
        .palace-item input {
            width: 100%;
            background: #16213e;
            border: 1px solid #d4af37;
            border-radius: 5px;
            padding: 8px;
            color: #e0e0e0;
            margin: 5px 0;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        .stat-box {
            background: #1a2744;
            padding: 20px;
            border-radius: 12px;
            border: 2px solid #d4af37;
            text-align: center;
        }
        .stat-box h3 { color: #d4af37; font-size: 0.9em; margin-bottom: 10px; }
        .stat-value { font-size: 2em; color: #51cf66; font-weight: bold; }
        .progress-bar {
            width: 100%;
            height: 30px;
            background: #16213e;
            border-radius: 15px;
            overflow: hidden;
            border: 2px solid #d4af37;
            margin: 15px 0;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #d4af37, #aa8c2c);
            transition: width 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #1a1a2e;
            font-weight: bold;
        }
        .article-text {
            background: #0f0f1e;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #d4af37;
            margin: 15px 0;
            line-height: 1.8;
        }
        .question {
            background: #1a2744;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #d4af37;
        }
        .answer-box {
            background: #0f0f1e;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            color: #999;
        }
        .technique-box {
            background: #1a2744;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid #d4af37;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>LESSON 27: Books, Articles & Deep Learning</h1>
            <span class="level-badge">Advanced Level</span>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="switchTab(event, 'retrieval')">Retrieval</button>
            <button class="tab" onclick="switchTab(event, 'content')">New Content</button>
            <button class="tab" onclick="switchTab(event, 'guided')">Guided Practice</button>
            <button class="tab" onclick="switchTab(event, 'elaboration')">Elaboration</button>
            <button class="tab" onclick="switchTab(event, 'independent')">Independent</button>
            <button class="tab" onclick="switchTab(event, 'final')">Final Retrieval</button>
        </div>

        <div id="retrieval" class="content active">
            <h2>Retrieval: Memory Techniques Review</h2>
            <p>Test your knowledge of previous memory techniques before learning advanced text memorization.</p>

            <div class="interactive-section">
                <h3>Technique Matching Challenge</h3>
                <div class="question">
                    <p><strong>1. Which technique works best for random information?</strong></p>
                    <p class="answer-box" id="ans1" style="display: none;">Method of Loci - create a familiar location and place items sequentially</p>
                    <button class="button" onclick="toggleAns('ans1')">Show Answer</button>
                </div>

                <div class="question">
                    <p><strong>2. What makes imagery more memorable?</strong></p>
                    <p class="answer-box" id="ans2" style="display: none;">Size, color, movement, emotion, and unusual/bizarre associations</p>
                    <button class="button" onclick="toggleAns('ans2')">Show Answer</button>
                </div>

                <div class="question">
                    <p><strong>3. How do you memorize long sequences of numbers?</strong></p>
                    <p class="answer-box" id="ans3" style="display: none;">Use the Major System, Dominic System, or number peg system to convert numbers to images</p>
                    <button class="button" onclick="toggleAns('ans3')">Show Answer</button>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-box">
                    <h3>Foundation Check</h3>
                    <div class="stat-value">Strong</div>
                </div>
                <div class="stat-box">
                    <h3>Readiness Level</h3>
                    <div class="stat-value">Ready</div>
                </div>
            </div>
        </div>

        <div id="content" class="content">
            <h2>New Content: Text Memorization Mastery</h2>

            <div class="card">
                <h3>Structure Mapping Technique</h3>
                <p>Structure mapping is understanding the organizational framework of complex text. It involves:</p>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li><strong>Hierarchy identification:</strong> What are main ideas vs. supporting details?</li>
                    <li><strong>Relationship mapping:</strong> How do concepts connect and relate?</li>
                    <li><strong>Pattern recognition:</strong> What recurring themes or structures exist?</li>
                    <li><strong>Key anchors:</strong> What are the critical points that hold everything together?</li>
                </ul>
            </div>

            <div class="card">
                <h3>Chapter Palaces: Building Hierarchies</h3>
                <p><strong>Concept:</strong> Each chapter of a book gets its own memory palace. Each section within the chapter gets a location within that palace.</p>
                <div class="technique-box">
                    <p><strong>Example: Psychology Textbook Chapter on Memory</strong></p>
                    <p style="margin-top: 10px;">Palace Location: Your childhood home</p>
                    <p>Front Door → Memory definition and types</p>
                    <p>Living Room → Encoding processes</p>
                    <p>Kitchen → Storage mechanisms</p>
                    <p>Bedroom → Retrieval strategies</p>
                    <p>Back Door → Forgetting and recall failure</p>
                </div>
            </div>

            <div class="card">
                <h3>Mind Map to Palace Conversion</h3>
                <p><strong>Process:</strong></p>
                <ol style="margin-left: 20px; margin-top: 10px;">
                    <li>Create a mind map of the article or chapter with main ideas and branches</li>
                    <li>Identify the primary concept (central hub)</li>
                    <li>Map each branch to a palace location</li>
                    <li>Sub-branches become details within that location</li>
                    <li>Use vivid imagery to anchor each element</li>
                </ol>
            </div>

            <div class="card">
                <h3>Deep Learning Through Memory</h3>
                <p>By memorizing the structure and key points of complex texts, you achieve:</p>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li>Better comprehension through organization</li>
                    <li>Stronger recall of interconnected concepts</li>
                    <li>Ability to apply knowledge in new contexts</li>
                    <li>Retention lasting months and years</li>
                </ul>
            </div>
        </div>

        <div id="guided" class="content">
            <h2>Guided Practice: Article Memorization System</h2>

            <div class="interactive-section">
                <h3>Step 1: Create Your Mind Map</h3>
                <p style="margin-bottom: 15px;">Build a mind map for the article below. Start with the central concept, then add branches for each main idea.</p>

                <div class="mindmap-node">
                    <label style="color: #d4af37;">Central Concept/Title:</label>
                    <input type="text" id="centerConcept" placeholder="e.g., The Benefits of Sleep">
                </div>

                <div class="mindmap-node">
                    <label style="color: #d4af37;">Branch 1 - Main Topic:</label>
                    <input type="text" id="branch1" placeholder="First major area">
                    <input type="text" id="branch1Detail" placeholder="Supporting detail" style="margin-top: 5px;">
                </div>

                <div class="mindmap-node">
                    <label style="color: #d4af37;">Branch 2 - Main Topic:</label>
                    <input type="text" id="branch2" placeholder="Second major area">
                    <input type="text" id="branch2Detail" placeholder="Supporting detail" style="margin-top: 5px;">
                </div>

                <div class="mindmap-node">
                    <label style="color: #d4af37;">Branch 3 - Main Topic:</label>
                    <input type="text" id="branch3" placeholder="Third major area">
                    <input type="text" id="branch3Detail" placeholder="Supporting detail" style="margin-top: 5px;">
                </div>

                <button class="button" onclick="displayMindMap()" style="margin-top: 15px;">Visualize Mind Map</button>
            </div>

            <div id="mindmapDisplay" style="display: none; margin-top: 20px;">
                <div class="interactive-section">
                    <h3>Your Mind Map Visualization</h3>
                    <div id="mindmapContent"></div>
                </div>
            </div>

            <div class="interactive-section" style="margin-top: 20px;">
                <h3>Step 2: Convert to Memory Palace</h3>
                <p style="margin-bottom: 15px;">Now convert your mind map into a memory palace with locations for each branch.</p>

                <div class="palace-grid">
                    <div class="palace-item">
                        <h3>Palace Location</h3>
                        <input type="text" id="palaceBase" placeholder="e.g., My office">
                    </div>
                    <div class="palace-item">
                        <h3>Room/Station 1</h3>
                        <input type="text" id="station1" placeholder="Location for Branch 1">
                    </div>
                </div>

                <div class="palace-grid">
                    <div class="palace-item">
                        <h3>Room/Station 2</h3>
                        <input type="text" id="station2" placeholder="Location for Branch 2">
                    </div>
                    <div class="palace-item">
                        <h3>Room/Station 3</h3>
                        <input type="text" id="station3" placeholder="Location for Branch 3">
                    </div>
                </div>

                <button class="button" onclick="buildPalace()" style="margin-top: 15px;">Complete Palace</button>
            </div>

            <div id="palaceDisplay" style="display: none; margin-top: 20px;">
                <div class="interactive-section">
                    <h3>Your Memory Palace Created</h3>
                    <div id="palaceContent" style="color: #51cf66; font-weight: bold;"></div>
                </div>
            </div>
        </div>

        <div id="elaboration" class="content">
            <h2>Elaboration: Article Memorization Challenge</h2>

            <div class="card">
                <h3>Sample Article: "The Science of Learning"</h3>
            </div>

            <div class="article-text">
                <p><strong>The Science of Learning: How Our Brains Retain Information</strong></p>

                <p style="margin-top: 15px;"><strong>Introduction:</strong> Modern neuroscience reveals that learning isn't random—it follows predictable patterns. Understanding how your brain processes and stores information can dramatically improve your ability to retain complex material.</p>

                <p style="margin-top: 15px;"><strong>1. The Role of Attention:</strong> Your brain filters thousands of stimuli every second. Only information you consciously attend to enters working memory. Distractions create gaps in encoding. When you focus deeply on material, your brain allocates resources to transfer information to long-term storage through a process called consolidation.</p>

                <p style="margin-top: 15px;"><strong>2. Spaced Repetition and Spacing Effect:</strong> Reviewing material at increasing intervals strengthens neural connections far more effectively than massed practice. The spacing effect shows that learning is enhanced when study sessions are separated by time. Your brain's recall effort during retrieval practice actually strengthens memory pathways.</p>

                <p style="margin-top: 15px;"><strong>3. Active Engagement and Elaboration:</strong> Passive reading is inefficient. Active learning—asking questions, making connections, explaining concepts—creates richer neural networks. When you elaborate on material by relating it to existing knowledge, you create multiple retrieval pathways, making recall easier.</p>

                <p style="margin-top: 15px;"><strong>4. Emotional Connection and Context:</strong> Information tied to emotions and personal experiences is more memorable. Your amygdala (emotional center) communicates with your hippocampus (memory center), enhancing encoding. Context provides retrieval cues—remembering where, when, and why you learned something improves recall.</p>

                <p style="margin-top: 15px;"><strong>Conclusion:</strong> Effective learning combines attention, strategic spacing, active engagement, and emotional investment. Master these principles and transform how you acquire and retain knowledge.</p>
            </div>

            <div class="interactive-section">
                <h3>Test Your Understanding</h3>

                <div class="question">
                    <p><strong>Question 1: What is the spacing effect?</strong></p>
                    <p class="answer-box" id="q1ans" style="display: none;">Spacing effect refers to enhanced learning when study sessions are separated by time intervals rather than massed practice.</p>
                    <button class="button" onclick="toggleQ('q1ans')">Show Answer</button>
                </div>

                <div class="question">
                    <p><strong>Question 2: Which brain structures are involved in emotional memory?</strong></p>
                    <p class="answer-box" id="q2ans" style="display: none;">The amygdala (emotional center) and hippocampus (memory center) work together to enhance emotionally-charged memories.</p>
                    <button class="button" onclick="toggleQ('q2ans')">Show Answer</button>
                </div>

                <div class="question">
                    <p><strong>Question 3: Why is active learning more effective than passive reading?</strong></p>
                    <p class="answer-box" id="q3ans" style="display: none;">Active learning creates richer neural networks and multiple retrieval pathways through questions, connections, and elaboration.</p>
                    <button class="button" onclick="toggleQ('q3ans')">Show Answer</button>
                </div>
            </div>

            <div style="margin-top: 20px;">
                <button class="button" onclick="startMemoizationChallenge()">Start Memorization Challenge</button>
            </div>

            <div id="memorizePrompt" style="display: none; margin-top: 20px;">
                <div class="interactive-section">
                    <h3>Memorization Challenge</h3>
                    <p style="margin-bottom: 15px;">Using your mind map and palace, how much of this article can you recall in 5 minutes?</p>
                    <textarea style="width: 100%; height: 200px; background: #0f0f1e; border: 2px solid #d4af37; border-radius: 8px; padding: 15px; color: #e0e0e0; margin: 15px 0;" id="memorizeOutput" placeholder="Write what you remember..."></textarea>
                    <button class="button" onclick="evaluateRecall()">Evaluate Recall</button>
                </div>

                <div id="recallFeedback" style="display: none; margin-top: 20px;">
                    <div class="interactive-section">
                        <h3>Recall Analysis</h3>
                        <div id="feedbackContent"></div>
                    </div>
                </div>
            </div>
        </div>

        <div id="independent" class="content">
            <h2>Independent Practice: Your Own Article</h2>

            <div class="card">
                <h3>Choose and Memorize</h3>
                <p>Select an article or book chapter you want to memorize, then apply the structure mapping and palace conversion techniques.</p>
            </div>

            <div class="interactive-section">
                <h3>Article Information</h3>

                <div class="mindmap-node">
                    <label style="color: #d4af37;">Article/Chapter Title:</label>
                    <input type="text" id="customTitle" placeholder="e.g., The History of Artificial Intelligence">
                </div>

                <div class="mindmap-node">
                    <label style="color: #d4af37;">Author/Source:</label>
                    <input type="text" id="customSource" placeholder="Optional">
                </div>

                <div class="mindmap-node">
                    <label style="color: #d4af37;">Paste article text or key points:</label>
                    <textarea style="width: 100%; height: 150px; background: #0f0f1e; border: 1px solid #d4af37; border-radius: 5px; padding: 10px; color: #e0e0e0; margin: 5px 0;" id="customText" placeholder="Paste your article here..."></textarea>
                </div>
            </div>

            <div class="interactive-section">
                <h3>Build Your Structure Map</h3>
                <p style="margin-bottom: 15px;">Create 3 main structural components:</p>

                <div class="mindmap-node">
                    <label style="color: #d4af37;">Main Component 1:</label>
                    <input type="text" id="mainComp1" placeholder="Primary theme or section">
                    <input type="text" id="mainComp1Detail" placeholder="Key points" style="margin-top: 5px;">
                </div>

                <div class="mindmap-node">
                    <label style="color: #d4af37;">Main Component 2:</label>
                    <input type="text" id="mainComp2" placeholder="Primary theme or section">
                    <input type="text" id="mainComp2Detail" placeholder="Key points" style="margin-top: 5px;">
                </div>

                <div class="mindmap-node">
                    <label style="color: #d4af37;">Main Component 3:</label>
                    <input type="text" id="mainComp3" placeholder="Primary theme or section">
                    <input type="text" id="mainComp3Detail" placeholder="Key points" style="margin-top: 5px;">
                </div>

                <button class="button" onclick="createCustomPalace()" style="margin-top: 15px;">Create Palace for My Article</button>
            </div>

            <div id="customPalaceResult" style="display: none; margin-top: 20px;">
                <div class="interactive-section">
                    <h3>Your Custom Memory Palace</h3>
                    <div id="customPalaceContent" style="color: #51cf66;"></div>
                    <button class="button" onclick="startCustomPractice()" style="margin-top: 15px;">Practice Recall</button>
                </div>
            </div>
        </div>

        <div id="final" class="content">
            <h2>Final Retrieval: Comprehensive Assessment</h2>

            <div class="interactive-section">
                <h3>Mastery Challenge: Full Article Recall</h3>
                <p style="margin-bottom: 15px;">Demonstrate your command of article memorization by recalling the article "The Science of Learning" from memory.</p>

                <div class="stats-grid">
                    <div class="stat-box">
                        <h3>Key Concepts</h3>
                        <div class="stat-value">5</div>
                    </div>
                    <div class="stat-box">
                        <h3>Target Accuracy</h3>
                        <div class="stat-value">80%+</div>
                    </div>
                </div>

                <button class="button" onclick="startFinalAssessment()">Begin Assessment</button>
            </div>

            <div id="finalAssessment" style="display: none; margin-top: 20px;">
                <div class="interactive-section">
                    <h3>Free Recall: The Science of Learning</h3>
                    <p style="margin-bottom: 15px;">Write everything you remember from the article. Include the main concepts and supporting details:</p>

                    <textarea style="width: 100%; height: 250px; background: #0f0f1e; border: 2px solid #d4af37; border-radius: 8px; padding: 15px; color: #e0e0e0; margin: 15px 0;" id="finalRecall" placeholder="Write your complete recall here..."></textarea>

                    <button class="button" onclick="scoreFinalRecall()">Score My Response</button>
                </div>

                <div id="finalScore" style="display: none; margin-top: 20px;">
                    <div class="interactive-section">
                        <h3>Assessment Results</h3>

                        <div class="progress-bar">
                            <div class="progress-fill" id="scoreBar" style="width: 0%;">0%</div>
                        </div>

                        <div id="scoreDetails" style="margin-top: 15px; color: #51cf66;"></div>

                        <div style="margin-top: 20px; text-align: center;">
                            <h3 style="color: #d4af37;">Lesson 27 Complete!</h3>
                            <p>You have mastered article and book memorization through structure mapping and palace conversion.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function switchTab(e, tabName) {
            const contents = document.querySelectorAll('.content');
            contents.forEach(el => el.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');

            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(el => el.classList.remove('active'));
            e.target.classList.add('active');
        }

        function toggleAns(id) {
            const el = document.getElementById(id);
            el.style.display = el.style.display === 'none' ? 'block' : 'none';
        }

        function toggleQ(id) {
            const el = document.getElementById(id);
            el.style.display = el.style.display === 'none' ? 'block' : 'none';
        }

        function displayMindMap() {
            const center = document.getElementById('centerConcept').value;
            const b1 = document.getElementById('branch1').value;
            const b1d = document.getElementById('branch1Detail').value;
            const b2 = document.getElementById('branch2').value;
            const b2d = document.getElementById('branch2Detail').value;
            const b3 = document.getElementById('branch3').value;
            const b3d = document.getElementById('branch3Detail').value;

            if (!center || !b1 || !b2 || !b3) {
                alert('Please fill in all main branches');
                return;
            }

            const mapHtml = `
                <div style="text-align: center; margin: 20px 0;">
                    <div style="font-size: 1.2em; color: #d4af37; font-weight: bold; margin-bottom: 20px;">${center}</div>
                </div>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: 20px;">
                    <div style="background: #0f0f1e; border: 2px solid #d4af37; border-radius: 10px; padding: 15px; text-align: center;">
                        <p style="color: #d4af37; font-weight: bold;">${b1}</p>
                        <p style="margin-top: 10px; font-size: 0.9em;">${b1d}</p>
                    </div>
                    <div style="background: #0f0f1e; border: 2px solid #d4af37; border-radius: 10px; padding: 15px; text-align: center;">
                        <p style="color: #d4af37; font-weight: bold;">${b2}</p>
                        <p style="margin-top: 10px; font-size: 0.9em;">${b2d}</p>
                    </div>
                    <div style="background: #0f0f1e; border: 2px solid #d4af37; border-radius: 10px; padding: 15px; text-align: center;">
                        <p style="color: #d4af37; font-weight: bold;">${b3}</p>
                        <p style="margin-top: 10px; font-size: 0.9em;">${b3d}</p>
                    </div>
                </div>
            `;

            document.getElementById('mindmapContent').innerHTML = mapHtml;
            document.getElementById('mindmapDisplay').style.display = 'block';
        }

        function buildPalace() {
            const base = document.getElementById('palaceBase').value;
            const s1 = document.getElementById('station1').value;
            const s2 = document.getElementById('station2').value;
            const s3 = document.getElementById('station3').value;

            if (!base || !s1 || !s2 || !s3) {
                alert('Please fill in all palace locations');
                return;
            }

            const palaceHtml = `
                <p><strong style="color: #d4af37;">Palace Base Location:</strong> ${base}</p>
                <p style="margin-top: 10px;"><strong style="color: #d4af37;">Station 1:</strong> ${s1}</p>
                <p style="margin-top: 10px;"><strong style="color: #d4af37;">Station 2:</strong> ${s2}</p>
                <p style="margin-top: 10px;"><strong style="color: #d4af37;">Station 3:</strong> ${s3}</p>
                <p style="margin-top: 15px; color: #51cf66;"><strong>✓ Memory palace created!</strong></p>
            `;

            document.getElementById('palaceContent').innerHTML = palaceHtml;
            document.getElementById('palaceDisplay').style.display = 'block';
        }

        function startMemoizationChallenge() {
            document.getElementById('memorizePrompt').style.display = 'block';
        }

        function evaluateRecall() {
            const recall = document.getElementById('memorizeOutput').value;
            const wordCount = recall.split(/\s+/).length;
            const keyTerms = ['attention', 'spacing', 'elaboration', 'emotion', 'amygdala', 'hippocampus'];
            const foundTerms = keyTerms.filter(term => recall.toLowerCase().includes(term)).length;
            const accuracy = Math.round((foundTerms / keyTerms.length) * 100);

            let feedback = '<div style="color: #51cf66;"><strong>✓ Recall Analysis Complete</strong></div>';
            feedback += `<p style="margin-top: 10px;">Words recalled: ${wordCount}</p>`;
            feedback += `<p>Key terms mentioned: ${foundTerms}/${keyTerms.length}</p>`;
            feedback += `<p style="margin-top: 10px; font-weight: bold;">Accuracy: ${accuracy}%</p>`;

            if (accuracy >= 80) {
                feedback += '<p style="margin-top: 10px; color: #51cf66;">Excellent! Strong comprehension and retention demonstrated.</p>';
            } else if (accuracy >= 60) {
                feedback += '<p style="margin-top: 10px; color: #ffa500;">Good effort. Review the palace locations for weaker sections.</p>';
            } else {
                feedback += '<p style="margin-top: 10px; color: #ff6b6b;">Need more practice. Strengthen your vivid palace imagery.</p>';
            }

            document.getElementById('feedbackContent').innerHTML = feedback;
            document.getElementById('recallFeedback').style.display = 'block';
        }

        function createCustomPalace() {
            const title = document.getElementById('customTitle').value;
            const comp1 = document.getElementById('mainComp1').value;
            const comp2 = document.getElementById('mainComp2').value;
            const comp3 = document.getElementById('mainComp3').value;

            if (!title || !comp1 || !comp2 || !comp3) {
                alert('Please complete all fields');
                return;
            }

            const palaceHtml = `
                <p style="margin-bottom: 10px;"><strong style="color: #d4af37;">${title}</strong></p>
                <p>Component 1: ${comp1}</p>
                <p style="margin-top: 10px;">Component 2: ${comp2}</p>
                <p style="margin-top: 10px;">Component 3: ${comp3}</p>
                <p style="margin-top: 15px; color: #51cf66;"><strong>✓ Custom palace ready!</strong></p>
            `;

            document.getElementById('customPalaceContent').innerHTML = palaceHtml;
            document.getElementById('customPalaceResult').style.display = 'block';
        }

        function startCustomPractice() {
            alert('Practice session started. Spend 10 minutes visualizing your palace locations and reinforcing the connections.');
        }

        function startFinalAssessment() {
            document.getElementById('finalAssessment').style.display = 'block';
        }

        function scoreFinalRecall() {
            const recall = document.getElementById('finalRecall').value.toLowerCase();
            let score = 0;

            const concepts = {
                'attention': 10,
                'consolidation': 10,
                'spacing': 15,
                'spaced repetition': 15,
                'elaboration': 15,
                'emotional': 10,
                'amygdala': 10,
                'hippocampus': 5
            };

            for (let [concept, points] of Object.entries(concepts)) {
                if (recall.includes(concept)) {
                    score += points;
                }
            }

            score = Math.min(100, score);

            const scoreBar = document.getElementById('scoreBar');
            scoreBar.style.width = score + '%';
            scoreBar.textContent = score + '%';

            let feedback = `<p><strong>Final Score: ${score}%</strong></p>`;
            feedback += '<p style="margin-top: 15px;">Key Concepts Recall:</p>';

            let concepts_found = 0;
            for (let concept of Object.keys(concepts)) {
                if (recall.includes(concept)) {
                    feedback += `<p style="color: #51cf66;">✓ ${concept}</p>`;
                    concepts_found++;
                }
            }

            if (score >= 80) {
                feedback += '<p style="margin-top: 15px; color: #51cf66; font-weight: bold;">Excellent mastery of article memorization!</p>';
            } else if (score >= 60) {
                feedback += '<p style="margin-top: 15px; color: #ffa500;">Good performance. Continue refining palace technique.</p>';
            }

            feedback += '<p style="margin-top: 15px; color: #51cf66;"><strong>Lesson 27 Complete!</strong></p>';

            document.getElementById('scoreDetails').innerHTML = feedback;
            document.getElementById('finalScore').style.display = 'block';
        }
    </script>
</body>
</html>
