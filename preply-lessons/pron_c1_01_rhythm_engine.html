<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Rhythm Engine ‚Äî Pronunciation Pathway 1</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f8f9fa;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 { font-size: 28px; margin-bottom: 8px; }
        .header p { font-size: 14px; opacity: 0.9; }
        .series-badge {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            margin-bottom: 10px;
            letter-spacing: 0.5px;
        }

        /* Tabs */
        .tabs {
            display: flex;
            border-bottom: 2px solid #e0e0e0;
            background: white;
            flex-wrap: wrap;
        }

        .tab-button {
            flex: 1;
            min-width: 80px;
            padding: 14px 8px;
            border: none;
            background: white;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            color: #666;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
            margin-bottom: -2px;
        }

        .tab-button.active { color: #667eea; border-bottom-color: #667eea; }
        .tab-button:hover { background: #f8f9fa; }

        .tab-content {
            padding: 35px;
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .tab-content.active { display: block; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Typography */
        .section-title {
            font-size: 18px;
            font-weight: 700;
            color: #333;
            margin: 24px 0 15px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title:first-child { margin-top: 0; }

        /* Boxes */
        .visual-box {
            background: #f5f5f5;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .rule-box {
            background: #fffde7;
            border-left: 4px solid #fbc02d;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
            font-size: 14px;
        }

        .trick-box {
            background: #f0f7ff;
            border-left: 4px solid #2196F3;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }

        .trick-box strong { color: #1976D2; }

        .exercise {
            background: #fafafa;
            padding: 20px;
            margin: 15px 0;
            border-radius: 4px;
            border-left: 4px solid #667eea;
        }

        .exercise-prompt {
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
        }

        .green-box {
            background: #f1f8e9;
            border-left: 4px solid #4caf50;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }

        /* Reveal */
        .reveal-box {
            background: #e8eaf6;
            padding: 15px;
            border-radius: 4px;
            margin-top: 10px;
            border-left: 4px solid #667eea;
            display: none;
        }

        .reveal-box.show { display: block; }

        /* Buttons */
        button {
            padding: 10px 20px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.3s ease;
            font-size: 14px;
        }

        button:hover { background: #764ba2; }

        .reveal-button { padding: 8px 16px; font-size: 13px; margin-top: 10px; }

        .btn-outline {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
        }

        .btn-outline:hover { background: #667eea; color: white; }

        .btn-small { padding: 6px 14px; font-size: 12px; }

        /* Feedback */
        .feedback {
            padding: 12px;
            border-radius: 4px;
            margin-top: 10px;
            font-size: 14px;
            display: none;
        }

        .feedback.correct {
            background: #c8e6c9;
            color: #2e7d32;
            border-left: 4px solid #2e7d32;
            display: block;
        }

        .feedback.incorrect {
            background: #ffcdd2;
            color: #c62828;
            border-left: 4px solid #c62828;
            display: block;
        }

        /* Inputs */
        input[type="text"], textarea {
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 4px;
            font-size: 14px;
            font-family: inherit;
            width: 100%;
        }

        input[type="text"]:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        textarea { resize: vertical; min-height: 80px; }

        /* Grids */
        .two-col {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 15px 0;
        }

        .card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 18px;
            transition: border-color 0.3s;
        }

        .card h4 { color: #333; margin-bottom: 8px; font-size: 15px; }
        .card p { font-size: 13px; color: #666; margin: 0; }

        .card.highlight-blue { border-color: #667eea; background: #f8f9ff; }
        .card.highlight-green { border-color: #4caf50; background: #f9fdf5; }

        /* Rhythm display */
        .rhythm-display {
            background: #1a1a2e;
            color: white;
            border-radius: 8px;
            padding: 25px;
            margin: 20px 0;
            font-size: 18px;
            line-height: 2.4;
            font-family: Georgia, serif;
        }

        .rhythm-display .content-word {
            color: #67b26f;
            font-weight: 700;
            font-size: 20px;
        }

        .rhythm-display .function-word {
            color: #888;
            font-size: 14px;
        }

        .rhythm-display .beat-mark {
            color: #fbc02d;
            font-weight: 700;
        }

        .rhythm-display .pause { color: #f5576c; margin: 0 6px; }

        .rhythm-display .schwa {
            color: #f5a623;
            font-style: italic;
            font-size: 14px;
        }

        /* Drag and sort */
        .word-bank {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin: 15px 0;
            min-height: 45px;
        }

        .word-chip {
            background: #e8eaf6;
            padding: 8px 14px;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
            user-select: none;
            border: 2px solid transparent;
        }

        .word-chip:hover { background: #c5cae9; }

        .word-chip.selected-content {
            background: #c8e6c9;
            border-color: #4caf50;
            color: #2e7d32;
            font-weight: 600;
        }

        .word-chip.selected-function {
            background: #ffecb3;
            border-color: #fbc02d;
            color: #795548;
        }

        .word-chip.wrong {
            background: #ffcdd2;
            border-color: #e53935;
        }

        /* Timer */
        .timer-container {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 15px 0;
        }

        .timer-display {
            font-size: 28px;
            font-weight: 700;
            font-family: 'Courier New', monospace;
            color: #00897b;
            min-width: 70px;
        }

        .timer-display.warning { color: #f9a825; }
        .timer-display.danger { color: #e53935; animation: pulse 1s infinite; }

        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }

        .timer-btn {
            padding: 6px 14px;
            font-size: 12px;
            border-radius: 4px;
        }

        /* Score tracker */
        .score-display {
            display: inline-block;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 6px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 14px;
        }

        /* Can statement */
        .can-statement {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 4px;
            text-align: center;
            font-weight: 700;
            font-size: 16px;
            margin-top: 30px;
        }

        /* Discussion cards */
        .discussion-card {
            background: linear-gradient(135deg, rgba(102,126,234,0.08), rgba(118,75,162,0.08));
            border: 2px solid #667eea;
            border-radius: 8px;
            padding: 20px;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s;
        }

        .discussion-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102,126,234,0.2);
        }

        .discussion-card h4 {
            color: #667eea;
            margin-bottom: 8px;
        }

        /* Phonetic notation */
        .ipa {
            font-family: 'Lucida Sans Unicode', 'Lucida Grande', serif;
            color: #667eea;
            font-size: 16px;
        }

        .compare-row {
            display: flex;
            align-items: center;
            gap: 20px;
            margin: 12px 0;
            padding: 12px;
            background: #fafafa;
            border-radius: 4px;
        }

        .compare-label {
            font-weight: 700;
            min-width: 120px;
            font-size: 13px;
        }

        .compare-label.machine { color: #e53935; }
        .compare-label.natural { color: #2e7d32; }

        .error-text { color: #d32f2f; text-decoration: line-through; font-weight: 500; }
        .correct-text { color: #2e7d32; font-weight: 700; }

        /* Responsive */
        @media (max-width: 768px) {
            .header { padding: 20px; }
            .header h1 { font-size: 22px; }
            .tab-content { padding: 20px; }
            .tabs { flex-direction: column; }
            .tab-button {
                border-bottom: 1px solid #e0e0e0;
                margin-bottom: 0;
                text-align: left;
                padding: 12px 16px;
            }
            .tab-button.active {
                border-left: 4px solid #667eea;
                border-bottom: 1px solid #e0e0e0;
            }
            .two-col { grid-template-columns: 1fr; }
            .rhythm-display { font-size: 15px; padding: 15px; }
            .rhythm-display .content-word { font-size: 17px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="series-badge">PRONUNCIATION PATHWAY &bull; LESSON 1 OF 6</div>
            <h1>üéµ The Rhythm Engine</h1>
            <p>B2‚ÄìC1 &bull; British English &bull; Why English has a "beat" ‚Äî and how to feel it</p>
        </div>

        <div class="tabs">
            <button class="tab-button active" onclick="showTab(0)">1. What You Know</button>
            <button class="tab-button" onclick="showTab(1)">2. The Beat</button>
            <button class="tab-button" onclick="showTab(2)">3. Strong &amp; Weak</button>
            <button class="tab-button" onclick="showTab(3)">4. Feel the Rhythm</button>
            <button class="tab-button" onclick="showTab(4)">5. Free Speaking</button>
            <button class="tab-button" onclick="showTab(5)">6. Recall Zone</button>
            <button class="tab-button" onclick="showTab(6)">7. Wrap-Up</button>
        </div>

        <!-- ==================== TAB 1: CONNECT ==================== -->
        <div class="tab-content active">
            <h2 class="section-title">üîç What do you already know?</h2>
            <p style="margin-bottom: 20px;">Before we look at anything new ‚Äî let's see what comes to mind. Don't worry about being right. Just have a go.</p>

            <div class="exercise">
                <div class="exercise-prompt">Think about these questions and say your answers aloud:</div>
                <div style="margin-top: 12px;">
                    <p style="margin: 10px 0;">1. What makes English sound different from your first language? Think about the "music" of the language, not just individual sounds.</p>
                    <p style="margin: 10px 0;">2. Some words in a sentence are louder and clearer than others. Can you think of a reason why?</p>
                    <p style="margin: 10px 0;">3. Say this sentence naturally: <strong>"I went to the shop and bought a bottle of water."</strong> ‚Äî Which words did you stress? Which words did you rush through?</p>
                </div>
            </div>

            <div class="rule-box" style="margin-top: 25px;">
                <strong>Today we're working on</strong> the rhythm system of English ‚Äî the pattern of strong and weak beats ‚Äî so you can sound more natural and be easier to understand.
            </div>

            <h2 class="section-title">üéß Listen to the difference</h2>
            <p>Here are two versions of the same sentence. One sounds robotic. One sounds natural. What's different?</p>

            <div class="compare-row">
                <span class="compare-label machine">ü§ñ Robotic:</span>
                <span style="font-size: 15px; letter-spacing: 2px;"><strong>I</strong> &bull; <strong>WENT</strong> &bull; <strong>TO</strong> &bull; <strong>THE</strong> &bull; <strong>SHOP</strong> &bull; <strong>AND</strong> &bull; <strong>BOUGHT</strong> &bull; <strong>A</strong> &bull; <strong>BOT</strong>-<strong>TLE</strong> &bull; <strong>OF</strong> &bull; <strong>WA</strong>-<strong>TER</strong></span>
            </div>
            <div style="text-align: center; color: #999; font-size: 12px; margin: 4px 0;">Every word gets equal weight. Every syllable takes the same time.</div>

            <div class="compare-row">
                <span class="compare-label natural">üó£Ô∏è Natural:</span>
                <span style="font-size: 15px;">I <span style="color: #999; font-size: 13px;">went t…ô th…ô</span> <strong style="color: #2e7d32; font-size: 17px;">SHOP</strong> <span style="color: #999; font-size: 13px;">…ôn</span> <strong style="color: #2e7d32; font-size: 17px;">BOUGHT</strong> <span style="color: #999; font-size: 13px;">…ô</span> <strong style="color: #2e7d32; font-size: 17px;">BOT</strong>tle <span style="color: #999; font-size: 13px;">…ôv</span> <strong style="color: #2e7d32; font-size: 17px;">WA</strong>ter</span>
            </div>
            <div style="text-align: center; color: #999; font-size: 12px; margin: 4px 0;">Big words carry meaning. Small words are swallowed. There's a BEAT.</div>

            <button class="reveal-button" onclick="toggleReveal('hook-reveal')">What's going on here?</button>
            <div id="hook-reveal" class="reveal-box">
                <p><strong>English is stress-timed.</strong> That means the stressed syllables happen at roughly regular intervals ‚Äî like a musical beat. The unstressed words between the beats get squeezed and reduced to fit.</p>
                <p style="margin-top: 8px;">This is the single biggest difference between sounding "foreign" and sounding "natural" in English. It's not about individual sounds ‚Äî it's about <strong>rhythm</strong>.</p>
            </div>
        </div>

        <!-- ==================== TAB 2: ACTIVATE ‚Äî The Beat ==================== -->
        <div class="tab-content">
            <h2 class="section-title">ü•Å Stress-timed vs syllable-timed</h2>

            <p>Most languages in the world are <strong>syllable-timed</strong> ‚Äî every syllable takes roughly the same amount of time. Spanish, French, Italian, Turkish, Korean, Japanese, Cantonese ‚Äî all syllable-timed.</p>

            <p style="margin-top: 12px;">English is different. English is <strong>stress-timed</strong>. The BEATS (stressed syllables) happen at regular intervals, and everything between the beats gets compressed.</p>

            <div class="two-col" style="margin: 20px 0;">
                <div class="card highlight-blue">
                    <h4>üîµ Syllable-timed</h4>
                    <p>da &bull; da &bull; da &bull; da &bull; da &bull; da</p>
                    <p style="margin-top: 8px;">Every syllable = same length</p>
                    <p style="margin-top: 4px; font-style: italic; color: #999;">Spanish, French, Italian, Turkish, Korean...</p>
                </div>
                <div class="card highlight-green">
                    <h4>üü¢ Stress-timed</h4>
                    <p><strong style="font-size: 16px;">DA</strong> <span style="color: #999; font-size: 12px;">d…ôd…ô</span> <strong style="font-size: 16px;">DA</strong> <span style="color: #999; font-size: 12px;">d…ô</span> <strong style="font-size: 16px;">DA</strong></p>
                    <p style="margin-top: 8px;">Beats at regular intervals, rest compressed</p>
                    <p style="margin-top: 4px; font-style: italic; color: #999;">English, German, Dutch, Russian, Arabic...</p>
                </div>
            </div>

            <div class="trick-box">
                <strong>üí° The magic test:</strong>
                <p style="margin-top: 8px;">These three sentences take roughly the <strong>same amount of time</strong> to say naturally:</p>
                <p style="margin-top: 8px; font-family: Georgia, serif; font-size: 15px;">
                    <strong>DOGS</strong> &nbsp; <strong>CHASE</strong> &nbsp; <strong>CATS</strong>.<br>
                    The <strong>DOGS</strong> will <strong>CHASE</strong> the <strong>CATS</strong>.<br>
                    The <strong>DOGS</strong> will have been <strong>CHAS</strong>ing the <strong>CATS</strong>.
                </p>
                <p style="margin-top: 8px;">Three beats in each. The unstressed syllables just get squeezed to fit between the beats. Try saying them ‚Äî tap your finger on each beat.</p>
            </div>

            <h2 class="section-title">üì¶ Content words vs function words</h2>
            <p>So which words get the beat? English divides words into two families:</p>

            <div class="two-col" style="margin: 20px 0;">
                <div class="card highlight-green">
                    <h4>üü¢ Content words ‚Äî STRESSED</h4>
                    <p style="margin-top: 8px;">These carry the <strong>meaning</strong>. Remove them and the sentence makes no sense.</p>
                    <p style="margin-top: 8px; font-size: 13px; color: #555;">
                        Nouns: <em>shop, bottle, water</em><br>
                        Main verbs: <em>went, bought, running</em><br>
                        Adjectives: <em>big, cold, beautiful</em><br>
                        Adverbs: <em>quickly, never, always</em><br>
                        Question words: <em>what, where, why</em><br>
                        Negatives: <em>not, never, can't</em>
                    </p>
                </div>
                <div class="card" style="border-color: #fbc02d; background: #fffdf5;">
                    <h4>üü° Function words ‚Äî WEAK</h4>
                    <p style="margin-top: 8px;">These are the <strong>grammar glue</strong>. Important for structure, but reduced in speech.</p>
                    <p style="margin-top: 8px; font-size: 13px; color: #555;">
                        Articles: <em>a, an, the</em><br>
                        Prepositions: <em>to, of, in, at, for</em><br>
                        Pronouns: <em>I, you, he, she, it, them</em><br>
                        Auxiliaries: <em>is, was, have, will, can</em><br>
                        Conjunctions: <em>and, but, or, that</em><br>
                        Relative pronouns: <em>who, which, that</em>
                    </p>
                </div>
            </div>

            <div class="rule-box">
                <strong>üéØ The rule:</strong> Content words get the beat. Function words get squeezed between the beats.
            </div>
        </div>

        <!-- ==================== TAB 3: ACTIVATE ‚Äî Strong & Weak (I do ‚Üí We do ‚Üí You do) ==================== -->
        <div class="tab-content">
            <h2 class="section-title">üëÄ Seeing the pattern</h2>
            <p>Look at this sentence. The green words are content words (stressed). The grey words are function words (weak, reduced).</p>

            <div class="rhythm-display">
                <span class="function-word">I</span> <span class="content-word">WENT</span> <span class="function-word">to the</span> <span class="content-word">SHOP</span> <span class="function-word">and</span> <span class="content-word">BOUGHT</span> <span class="function-word">a</span> <span class="content-word">BOT</span><span class="function-word">tle</span> <span class="function-word">of</span> <span class="content-word">WA</span><span class="function-word">ter</span>
            </div>

            <div class="trick-box">
                <strong>üí° Notice:</strong> The function words don't just get quieter ‚Äî they change their vowel sound. "To" becomes /t…ô/. "The" becomes /√∞…ô/. "And" becomes /…ôn/. "Of" becomes /…ôv/. "A" becomes /…ô/. This is the <strong>schwa</strong> ‚Äî the lazy "uh" sound that powers English rhythm.
            </div>

            <h2 class="section-title">ü§ù Let's work through some together</h2>
            <p>For each sentence, say it aloud and decide: which words carry the beat?</p>

            <div class="exercise" style="margin-top: 15px;">
                <div class="exercise-prompt">Sentence 1: "She was waiting for a bus in the rain."</div>
                <p style="font-size: 13px; color: #666; margin-bottom: 10px;">Say it naturally. Which words do you stress? Then check.</p>
                <button class="reveal-button" onclick="toggleReveal('wedo-1')">Check the rhythm</button>
                <div id="wedo-1" class="reveal-box">
                    <div class="rhythm-display" style="font-size: 16px; padding: 15px;">
                        <span class="function-word">She was</span> <span class="content-word">WAIT</span><span class="function-word">ing</span> <span class="function-word">for a</span> <span class="content-word">BUS</span> <span class="function-word">in the</span> <span class="content-word">RAIN</span>
                    </div>
                    <p style="margin-top: 8px; font-size: 13px;">Three beats: WAIT ‚Äî BUS ‚Äî RAIN. "She was", "for a", "in the" are all squeezed and reduced. "For a" becomes /fr…ô/. "In the" becomes /…™n√∞…ô/.</p>
                </div>
            </div>

            <div class="exercise">
                <div class="exercise-prompt">Sentence 2: "I've been thinking about it for a couple of days."</div>
                <p style="font-size: 13px; color: #666; margin-bottom: 10px;">This one has more function words. Where are the beats?</p>
                <button class="reveal-button" onclick="toggleReveal('wedo-2')">Check the rhythm</button>
                <div id="wedo-2" class="reveal-box">
                    <div class="rhythm-display" style="font-size: 16px; padding: 15px;">
                        <span class="function-word">I've been</span> <span class="content-word">THINK</span><span class="function-word">ing</span> <span class="function-word">abou'</span> <span class="function-word">it for a</span> <span class="content-word">COU</span><span class="function-word">ple of</span> <span class="content-word">DAYS</span>
                    </div>
                    <p style="margin-top: 8px; font-size: 13px;">Three beats: THINK ‚Äî COU(ple) ‚Äî DAYS. Notice "about it for a" gets compressed into a rapid stream. "About" loses its final /t/. "For a" ‚Üí /fr…ô/. "Couple of" ‚Üí /k åpl…ôv/.</p>
                </div>
            </div>

            <div class="exercise">
                <div class="exercise-prompt">Sentence 3: "We could have gone to the restaurant but we decided to stay at home."</div>
                <p style="font-size: 13px; color: #666; margin-bottom: 10px;">A longer sentence ‚Äî more function words, same principle.</p>
                <button class="reveal-button" onclick="toggleReveal('wedo-3')">Check the rhythm</button>
                <div id="wedo-3" class="reveal-box">
                    <div class="rhythm-display" style="font-size: 16px; padding: 15px;">
                        <span class="function-word">We could've</span> <span class="content-word">GONE</span> <span class="function-word">to the</span> <span class="content-word">RES</span><span class="function-word">taurant</span> <span class="function-word">but we</span> <span class="content-word">DE</span><span class="function-word">cided</span> <span class="function-word">to</span> <span class="content-word">STAY</span> <span class="function-word">at</span> <span class="content-word">HOME</span>
                    </div>
                    <p style="margin-top: 8px; font-size: 13px;">Five beats: GONE ‚Äî RES(taurant) ‚Äî DE(cided) ‚Äî STAY ‚Äî HOME. "Could have" ‚Üí /k äd…ôv/. "To the" ‚Üí /t…ô √∞…ô/. "But we" ‚Üí /b…ôtwi/.</p>
                </div>
            </div>

            <h2 class="section-title">üéØ Your turn ‚Äî sort the words</h2>
            <p>Click each word to mark it as a <span style="color: #4caf50; font-weight: 600;">content word</span> (first click) or <span style="color: #795548; font-weight: 600;">function word</span> (second click). Third click resets it.</p>

            <div class="exercise" id="sort-exercise-1">
                <div class="exercise-prompt">"The children were playing in the garden after school."</div>
                <div class="word-bank" id="sort-bank-1">
                    <span class="word-chip" data-type="function" onclick="cycleChip(this)">The</span>
                    <span class="word-chip" data-type="content" onclick="cycleChip(this)">children</span>
                    <span class="word-chip" data-type="function" onclick="cycleChip(this)">were</span>
                    <span class="word-chip" data-type="content" onclick="cycleChip(this)">playing</span>
                    <span class="word-chip" data-type="function" onclick="cycleChip(this)">in</span>
                    <span class="word-chip" data-type="function" onclick="cycleChip(this)">the</span>
                    <span class="word-chip" data-type="content" onclick="cycleChip(this)">garden</span>
                    <span class="word-chip" data-type="function" onclick="cycleChip(this)">after</span>
                    <span class="word-chip" data-type="content" onclick="cycleChip(this)">school</span>
                </div>
                <button onclick="checkSort('sort-bank-1', 'sort-fb-1')" style="margin-top: 10px;">Check</button>
                <div id="sort-fb-1" class="feedback"></div>
            </div>

            <div class="exercise" id="sort-exercise-2">
                <div class="exercise-prompt">"He told me that he would be arriving at about half past seven."</div>
                <div class="word-bank" id="sort-bank-2">
                    <span class="word-chip" data-type="function" onclick="cycleChip(this)">He</span>
                    <span class="word-chip" data-type="content" onclick="cycleChip(this)">told</span>
                    <span class="word-chip" data-type="function" onclick="cycleChip(this)">me</span>
                    <span class="word-chip" data-type="function" onclick="cycleChip(this)">that</span>
                    <span class="word-chip" data-type="function" onclick="cycleChip(this)">he</span>
                    <span class="word-chip" data-type="function" onclick="cycleChip(this)">would</span>
                    <span class="word-chip" data-type="function" onclick="cycleChip(this)">be</span>
                    <span class="word-chip" data-type="content" onclick="cycleChip(this)">arriving</span>
                    <span class="word-chip" data-type="function" onclick="cycleChip(this)">at</span>
                    <span class="word-chip" data-type="function" onclick="cycleChip(this)">about</span>
                    <span class="word-chip" data-type="content" onclick="cycleChip(this)">half</span>
                    <span class="word-chip" data-type="content" onclick="cycleChip(this)">past</span>
                    <span class="word-chip" data-type="content" onclick="cycleChip(this)">seven</span>
                </div>
                <button onclick="checkSort('sort-bank-2', 'sort-fb-2')" style="margin-top: 10px;">Check</button>
                <div id="sort-fb-2" class="feedback"></div>
            </div>
        </div>

        <!-- ==================== TAB 4: DEMONSTRATE ‚Äî Feel the Rhythm ==================== -->
        <div class="tab-content">
            <h2 class="section-title">üó£Ô∏è Reading with rhythm</h2>
            <p>Here's a short passage. First, read it silently and identify the content words. Then read it aloud ‚Äî stress the content words, squeeze the function words, and try to keep a steady beat.</p>

            <div class="exercise">
                <div class="exercise-prompt">Step 1: Tap the content words in this passage</div>
                <div class="rhythm-display" id="passage-tap" style="cursor: pointer; font-size: 16px;">
                    <span class="tap-word" data-type="function" onclick="tapWord(this)">I</span>
                    <span class="tap-word" data-type="content" onclick="tapWord(this)">moved</span>
                    <span class="tap-word" data-type="function" onclick="tapWord(this)">to</span>
                    <span class="tap-word" data-type="content" onclick="tapWord(this)">London</span>
                    <span class="tap-word" data-type="function" onclick="tapWord(this)">about</span>
                    <span class="tap-word" data-type="content" onclick="tapWord(this)">three</span>
                    <span class="tap-word" data-type="content" onclick="tapWord(this)">years</span>
                    <span class="tap-word" data-type="function" onclick="tapWord(this)">ago</span>
                    <span class="tap-word" data-type="function" onclick="tapWord(this)">and</span>
                    <span class="tap-word" data-type="function" onclick="tapWord(this)">I</span>
                    <span class="tap-word" data-type="content" onclick="tapWord(this)">absolutely</span>
                    <span class="tap-word" data-type="content" onclick="tapWord(this)">love</span>
                    <span class="tap-word" data-type="function" onclick="tapWord(this)">it.</span>
                    <span class="tap-word" data-type="function" onclick="tapWord(this)">The</span>
                    <span class="tap-word" data-type="content" onclick="tapWord(this)">first</span>
                    <span class="tap-word" data-type="content" onclick="tapWord(this)">thing</span>
                    <span class="tap-word" data-type="function" onclick="tapWord(this)">that</span>
                    <span class="tap-word" data-type="content" onclick="tapWord(this)">struck</span>
                    <span class="tap-word" data-type="function" onclick="tapWord(this)">me</span>
                    <span class="tap-word" data-type="function" onclick="tapWord(this)">was</span>
                    <span class="tap-word" data-type="function" onclick="tapWord(this)">the</span>
                    <span class="tap-word" data-type="content" onclick="tapWord(this)">sheer</span>
                    <span class="tap-word" data-type="content" onclick="tapWord(this)">variety</span>
                    <span class="tap-word" data-type="function" onclick="tapWord(this)">of</span>
                    <span class="tap-word" data-type="content" onclick="tapWord(this)">people</span>
                    <span class="tap-word" data-type="function" onclick="tapWord(this)">and</span>
                    <span class="tap-word" data-type="content" onclick="tapWord(this)">cultures.</span>
                    <span class="tap-word" data-type="function" onclick="tapWord(this)">You</span>
                    <span class="tap-word" data-type="function" onclick="tapWord(this)">can</span>
                    <span class="tap-word" data-type="content" onclick="tapWord(this)">walk</span>
                    <span class="tap-word" data-type="content" onclick="tapWord(this)">down</span>
                    <span class="tap-word" data-type="function" onclick="tapWord(this)">a</span>
                    <span class="tap-word" data-type="content" onclick="tapWord(this)">single</span>
                    <span class="tap-word" data-type="content" onclick="tapWord(this)">street</span>
                    <span class="tap-word" data-type="function" onclick="tapWord(this)">and</span>
                    <span class="tap-word" data-type="content" onclick="tapWord(this)">hear</span>
                    <span class="tap-word" data-type="content" onclick="tapWord(this)">ten</span>
                    <span class="tap-word" data-type="content" onclick="tapWord(this)">different</span>
                    <span class="tap-word" data-type="content" onclick="tapWord(this)">languages.</span>
                </div>
                <div style="margin-top: 10px;">
                    <button onclick="checkPassageTap()">Check</button>
                    <button class="btn-outline" onclick="resetPassageTap()" style="margin-left: 8px;">Reset</button>
                </div>
                <div id="passage-tap-fb" class="feedback"></div>
            </div>

            <div class="exercise">
                <div class="exercise-prompt">Step 2: Now read the passage aloud with rhythm</div>
                <p style="font-size: 13px; color: #666; margin-bottom: 12px;">Tap your finger or pen on the desk for each beat. Try to keep the beats roughly evenly spaced ‚Äî squeeze the little words between them.</p>
                <div class="timer-container">
                    <span class="timer-display" id="timer-read">3:00</span>
                    <button class="timer-btn" onclick="startTimer('timer-read', 180)">Start</button>
                    <button class="timer-btn btn-outline" onclick="resetTimer('timer-read', 180)">Reset</button>
                </div>
                <p style="font-size: 13px; color: #999; margin-top: 8px;">Read it through at least 3 times. Each time, try to make the function words weaker and the rhythm more natural.</p>
            </div>

            <h2 class="section-title">üß© Explain the pattern</h2>
            <div class="exercise">
                <div class="exercise-prompt">In your own words, explain the difference between content words and function words. Give an example of each.</div>
                <textarea id="explain-input" placeholder="Say this aloud first, then type your explanation here..."></textarea>
                <button class="reveal-button" onclick="toggleReveal('explain-model')">See a model explanation</button>
                <div id="explain-model" class="reveal-box">
                    <p><strong>Example:</strong> Content words carry the meaning of the sentence ‚Äî nouns, main verbs, adjectives, adverbs. Like "shop" or "bought." Function words are the grammar glue ‚Äî articles, prepositions, pronouns, auxiliaries. Like "the" or "was." In natural English, content words are stressed and function words are reduced to weak forms with the schwa sound.</p>
                </div>
            </div>
        </div>

        <!-- ==================== TAB 5: DEMONSTRATE ‚Äî Free Speaking ==================== -->
        <div class="tab-content">
            <h2 class="section-title">üé§ Speaking with rhythm ‚Äî discussion cards</h2>
            <p>Choose 2 of these cards. Speak for about 1 minute on each one. Focus on keeping a natural rhythm: stress the content words, reduce the function words.</p>

            <div class="discussion-card" onclick="this.querySelector('.dc-detail').classList.toggle('show')">
                <h4>üèôÔ∏è Card A: A place you've lived</h4>
                <p>Talk about a city or town you've lived in. What was it like? What did you enjoy? What would you change?</p>
                <div class="dc-detail reveal-box" style="margin-top: 12px; border-left: none; background: rgba(102,126,234,0.08);">
                    <p style="font-size: 13px; color: #555;"><strong>Rhythm focus:</strong> Notice phrases like "I used to live in...", "one of the things I loved about it was..." ‚Äî the little words (to, in, of, the, it, was) should all be weak and fast.</p>
                </div>
            </div>

            <div class="discussion-card" onclick="this.querySelector('.dc-detail').classList.toggle('show')">
                <h4>üéì Card B: Something you learned to do</h4>
                <p>Describe learning a skill ‚Äî driving, cooking, a sport, an instrument. What was difficult at first? How did you improve?</p>
                <div class="dc-detail reveal-box" style="margin-top: 12px; border-left: none; background: rgba(102,126,234,0.08);">
                    <p style="font-size: 13px; color: #555;"><strong>Rhythm focus:</strong> Past narrative uses many auxiliaries ("I had been trying", "I would always forget") ‚Äî these auxiliary clusters should be reduced to weak forms.</p>
                </div>
            </div>

            <div class="discussion-card" onclick="this.querySelector('.dc-detail').classList.toggle('show')">
                <h4>‚úàÔ∏è Card C: A memorable journey</h4>
                <p>Talk about a trip or journey that stands out in your memory. What happened? Why was it memorable?</p>
                <div class="dc-detail reveal-box" style="margin-top: 12px; border-left: none; background: rgba(102,126,234,0.08);">
                    <p style="font-size: 13px; color: #555;"><strong>Rhythm focus:</strong> Travel stories have lots of prepositions ("from... to...", "through the...", "at the...") ‚Äî keep these light and fast.</p>
                </div>
            </div>

            <div class="discussion-card" onclick="this.querySelector('.dc-detail').classList.toggle('show')">
                <h4>ü§î Card D: A decision you made</h4>
                <p>Talk about a significant decision in your life. What were the options? What did you decide and why?</p>
                <div class="dc-detail reveal-box" style="margin-top: 12px; border-left: none; background: rgba(102,126,234,0.08);">
                    <p style="font-size: 13px; color: #555;"><strong>Rhythm focus:</strong> Decision language ("I could have gone...", "I might have chosen...") is full of modal + auxiliary clusters that should be compressed.</p>
                </div>
            </div>

            <div class="timer-container" style="margin-top: 20px;">
                <span class="timer-display" id="timer-speak">1:00</span>
                <button class="timer-btn" onclick="startTimer('timer-speak', 60)">Start 1 min</button>
                <button class="timer-btn btn-outline" onclick="resetTimer('timer-speak', 60)">Reset</button>
                <button class="timer-btn btn-outline" onclick="startTimer('timer-speak', 180)">3 min</button>
            </div>

            <h2 class="section-title" style="margin-top: 30px;">‚úçÔ∏è Quick reflection</h2>
            <div class="exercise">
                <div class="exercise-prompt">After speaking, write 2-3 function word phrases you noticed yourself squeezing. How did they sound?</div>
                <textarea id="reflection-input" placeholder="e.g. 'one of the' became /w ån…ô√∞…ô/, 'I would have' became /a…™w äd…ôv/..."></textarea>
            </div>
        </div>

        <!-- ==================== TAB 6: RECALL ZONE ==================== -->
        <div class="tab-content">
            <h2 class="section-title">üîÑ Recall Zone</h2>
            <p>This is Lesson 1, so there's nothing from previous lessons to recall yet. From Lesson 2 onwards, this tab will test your memory of content from earlier lessons.</p>

            <div class="visual-box">
                <p><strong>How spaced recall works:</strong></p>
                <p style="margin-top: 8px; font-size: 14px;">After each lesson, the key concepts will come back at increasing intervals ‚Äî in Lessons 2, 3, 5, and beyond. Each time you recall something from memory (not by re-reading), the memory gets stronger.</p>
                <p style="margin-top: 8px; font-size: 14px;">The rule is simple: <strong>try to remember BEFORE looking.</strong> The effort of retrieval is what builds lasting knowledge.</p>
            </div>

            <div class="green-box">
                <strong>üß† What to remember from today:</strong>
                <p style="margin-top: 8px;">These concepts will come back in future lessons. Try to lock them in now:</p>
                <p style="margin-top: 8px;">1. English is <strong>stress-timed</strong> ‚Äî beats at regular intervals</p>
                <p style="margin-top: 8px;">2. <strong>Content words</strong> carry the beat (nouns, main verbs, adjectives, adverbs)</p>
                <p style="margin-top: 8px;">3. <strong>Function words</strong> are reduced between the beats (articles, prepositions, auxiliaries, pronouns)</p>
                <p style="margin-top: 8px;">4. Function words use the <strong>schwa /…ô/</strong> ‚Äî the lazy "uh" that powers the rhythm</p>
            </div>
        </div>

        <!-- ==================== TAB 7: CONSOLIDATE ==================== -->
        <div class="tab-content">
            <h2 class="section-title">üß† Final check ‚Äî from memory</h2>
            <p>Close your eyes or look away from the screen. Answer these questions aloud ‚Äî no peeking.</p>

            <div class="exercise">
                <div class="exercise-prompt">1. What does "stress-timed" mean? How is it different from "syllable-timed"?</div>
                <button class="reveal-button" onclick="toggleReveal('final-1')">Check</button>
                <div id="final-1" class="reveal-box">
                    <p>In stress-timed languages, the stressed syllables happen at regular intervals (like a beat), and unstressed syllables get compressed to fit between them. In syllable-timed languages, every syllable takes roughly the same time.</p>
                </div>
            </div>

            <div class="exercise">
                <div class="exercise-prompt">2. Name 3 types of content words and 3 types of function words.</div>
                <button class="reveal-button" onclick="toggleReveal('final-2')">Check</button>
                <div id="final-2" class="reveal-box">
                    <p><strong>Content:</strong> nouns, main verbs, adjectives (also: adverbs, question words, negatives)</p>
                    <p style="margin-top: 6px;"><strong>Function:</strong> articles, prepositions, auxiliaries (also: pronouns, conjunctions)</p>
                </div>
            </div>

            <div class="exercise">
                <div class="exercise-prompt">3. What happens to function words in natural speech? What sound do they often use?</div>
                <button class="reveal-button" onclick="toggleReveal('final-3')">Check</button>
                <div id="final-3" class="reveal-box">
                    <p>They get reduced ‚Äî shorter, quieter, and their vowels often change to schwa /…ô/. For example: "to" ‚Üí /t…ô/, "and" ‚Üí /…ôn/, "of" ‚Üí /…ôv/, "was" ‚Üí /w…ôz/.</p>
                </div>
            </div>

            <h2 class="section-title">üí≠ Thinking about learning</h2>
            <div class="exercise">
                <div class="exercise-prompt">Which activity in today's lesson helped you understand the rhythm most? Why do you think it worked for you?</div>
                <textarea id="meta-input" placeholder="Say this aloud first ‚Äî which part clicked for you?"></textarea>
            </div>

            <div class="can-statement">
                ‚úÖ I can identify content and function words in a sentence and produce stress-timed rhythm by stressing content words and reducing function words to weak forms.
            </div>
        </div>
    </div>

    <script>
        // ==================== TAB NAVIGATION ====================
        function showTab(tabIndex) {
            const tabs = document.querySelectorAll('.tab-content');
            const buttons = document.querySelectorAll('.tab-button');
            tabs.forEach((tab, i) => {
                tab.classList.remove('active');
                buttons[i].classList.remove('active');
            });
            tabs[tabIndex].classList.add('active');
            buttons[tabIndex].classList.add('active');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // ==================== REVEAL TOGGLE ====================
        function toggleReveal(id) {
            const el = document.getElementById(id);
            el.classList.toggle('show');
        }

        // ==================== WORD CHIP CYCLING ====================
        function cycleChip(chip) {
            if (chip.classList.contains('selected-content')) {
                chip.classList.remove('selected-content');
                chip.classList.add('selected-function');
            } else if (chip.classList.contains('selected-function')) {
                chip.classList.remove('selected-function');
            } else {
                chip.classList.add('selected-content');
            }
            // Remove wrong state on interaction
            chip.classList.remove('wrong');
        }

        // ==================== SORT CHECK ====================
        function checkSort(bankId, fbId) {
            const bank = document.getElementById(bankId);
            const chips = bank.querySelectorAll('.word-chip');
            const fb = document.getElementById(fbId);
            let correct = 0;
            let total = chips.length;
            let errors = [];

            chips.forEach(chip => {
                const expected = chip.dataset.type;
                const isContent = chip.classList.contains('selected-content');
                const isFunction = chip.classList.contains('selected-function');
                chip.classList.remove('wrong');

                if (expected === 'content' && isContent) {
                    correct++;
                } else if (expected === 'function' && isFunction) {
                    correct++;
                } else if (!isContent && !isFunction) {
                    chip.classList.add('wrong');
                    errors.push('"' + chip.textContent + '" ‚Äî not classified yet');
                } else {
                    chip.classList.add('wrong');
                    errors.push('"' + chip.textContent + '" ‚Äî should be ' + expected);
                }
            });

            if (correct === total) {
                fb.className = 'feedback correct';
                fb.innerHTML = '‚úì All correct! Content words carry meaning and get the beat. Function words are grammar glue and get reduced. Now say the sentence aloud with that rhythm.';
            } else {
                fb.className = 'feedback incorrect';
                fb.innerHTML = '‚úó ' + (total - correct) + ' to fix. ' + errors.slice(0, 3).join('. ') + '. Remember: nouns, main verbs, adjectives, adverbs = content. Articles, prepositions, auxiliaries, pronouns = function.';
            }
        }

        // ==================== PASSAGE TAP ====================
        function tapWord(el) {
            if (el.style.color === 'rgb(103, 178, 111)') {
                el.style.color = '';
                el.style.fontWeight = '';
                el.style.fontSize = '';
            } else {
                el.style.color = '#67b26f';
                el.style.fontWeight = '700';
                el.style.fontSize = '18px';
            }
        }

        function checkPassageTap() {
            const words = document.querySelectorAll('#passage-tap .tap-word');
            const fb = document.getElementById('passage-tap-fb');
            let correct = 0;
            let total = 0;

            words.forEach(w => {
                const expected = w.dataset.type;
                const tapped = w.style.color === 'rgb(103, 178, 111)';

                if (expected === 'content') {
                    total++;
                    if (tapped) correct++;
                    else { w.style.borderBottom = '2px dashed #e53935'; }
                }
                if (expected === 'function' && tapped) {
                    w.style.color = '#e53935';
                    w.style.textDecoration = 'line-through';
                }
            });

            if (correct >= total - 2) {
                fb.className = 'feedback correct';
                fb.innerHTML = '‚úì ' + correct + '/' + total + ' content words identified. Nice work! Now read it aloud ‚Äî stress these words and squeeze everything else.';
            } else {
                fb.className = 'feedback incorrect';
                fb.innerHTML = '‚úó ' + correct + '/' + total + ' content words found. Words with a dashed underline are content words you missed. Words with a strikethrough are function words you selected by mistake.';
            }
        }

        function resetPassageTap() {
            const words = document.querySelectorAll('#passage-tap .tap-word');
            words.forEach(w => {
                w.style.color = '';
                w.style.fontWeight = '';
                w.style.fontSize = '';
                w.style.borderBottom = '';
                w.style.textDecoration = '';
            });
            document.getElementById('passage-tap-fb').className = 'feedback';
            document.getElementById('passage-tap-fb').innerHTML = '';
        }

        // ==================== TIMER ====================
        let timerIntervals = {};

        function startTimer(id, seconds) {
            const display = document.getElementById(id);
            if (timerIntervals[id]) clearInterval(timerIntervals[id]);

            let remaining = parseInt(display.dataset.remaining || seconds);
            display.dataset.remaining = remaining;

            timerIntervals[id] = setInterval(() => {
                remaining--;
                display.dataset.remaining = remaining;

                const mins = Math.floor(remaining / 60);
                const secs = remaining % 60;
                display.textContent = mins + ':' + (secs < 10 ? '0' : '') + secs;

                display.className = 'timer-display';
                if (remaining <= 10) display.classList.add('danger');
                else if (remaining <= 30) display.classList.add('warning');

                if (remaining <= 0) {
                    clearInterval(timerIntervals[id]);
                    display.textContent = '0:00';
                    display.classList.add('danger');
                }
            }, 1000);
        }

        function resetTimer(id, seconds) {
            if (timerIntervals[id]) clearInterval(timerIntervals[id]);
            const display = document.getElementById(id);
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            display.textContent = mins + ':' + (secs < 10 ? '0' : '') + secs;
            display.dataset.remaining = seconds;
            display.className = 'timer-display';
        }
    </script>
</body>
</html>
